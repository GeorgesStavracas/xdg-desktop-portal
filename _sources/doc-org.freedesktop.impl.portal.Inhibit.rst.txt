.. _org.freedesktop.impl.portal.Inhibit:

===================================
org.freedesktop.impl.portal.Inhibit
===================================

-----------
Description
-----------

.. _org.freedesktop.impl.portal.Inhibit Description:

Inhibit portal backend interface

The inhibit portal lets sandboxed applications inhibit the user
session from ending, suspending, idling or getting switched away.



-------
Methods
-------

.. org.freedesktop.impl.portal.Inhibit Methods:

org.freedesktop.impl.portal.Inhibit.Inhibit
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    Inhibit (
      IN handle o,
      IN app_id s,
      IN window s,
      IN flags u,
      IN options a{sv}
    )



Inhibits session status changes. As a side-effect of this call,
a `org.freedesktop.impl.portal.Request`_ object is exported on the
object path ``handle``. To end the inhibition, call
`org.freedesktop.impl.portal.Request.Close`_ on that object.

The flags determine what changes are inhibited:
<simplelist>
<member>1: Logout</member>
<member>2: User Switch</member>
<member>4: Suspend</member>
<member>8: Idle</member>
</simplelist>

Supported keys in the ``options`` vardict include:
<variablelist>
<varlistentry>
<term>reason s</term>
<listitem><para>User-visible reason for the inhibition.</para></listitem>
</varlistentry>
</variablelist>



handle
  Object path for the `org.freedesktop.impl.portal.Request`_ object representing this call

app_id
  Application id

window
  Identifier for the window

flags
  Flags identifying what is inhibited

options
  Vardict with optional further information



org.freedesktop.impl.portal.Inhibit.CreateMonitor
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    CreateMonitor (
      IN handle o,
      IN session_handle o,
      IN app_id s,
      IN window s,
      OUT response u
    )



Creates a monitoring session. While this session is
active, the caller will receive StateChanged signals
with updates on the session state.



handle
  Object path for the `org.freedesktop.impl.portal.Request`_ object representing this call

session_handle
  Object path for the created `org.freedesktop.impl.portal.Session`_ object

app_id
  App id of the application

window
  the parent window



org.freedesktop.impl.portal.Inhibit.QueryEndResponse
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    QueryEndResponse (
      IN session_handle o
    )



Acknowledges that the caller received the `org.freedesktop.impl.portal.Inhibit::StateChanged`_
signal. This method should be called within one second or receiving a StateChanged
signal with the 'Query End' state.



session_handle
  Object path for the `org.freedesktop.impl.portal.Session`_ object


-------
Signals
-------

.. org.freedesktop.impl.portal.Inhibit Signals:

org.freedesktop.impl.portal.Inhibit::StateChanged
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    StateChanged (
      session_handle o,
      state a{sv}
    )



The StateChanged signal is sent to active monitoring sessions when
the session state changes.

When the session state changes to 'Query End', clients with active monitoring
sessions are expected to respond by calling
`org.freedesktop.impl.portal.Inhibit.QueryEndResponse`_ within a second
of receiving the StateChanged signal.

The following information may get returned in the ``state`` vardict:
<variablelist>
<varlistentry>
<term>screensaver-active b</term>
<listitem><para>
Whether the screensaver is active.
</para></listitem>
</varlistentry>
<varlistentry>
<term>session-state u</term>
<listitem><para>
The state of the session.
</para>
<simplelist>
<member>1: Running</member>
<member>2: Query End</member>
<member>3: Ending</member>
</simplelist>
</listitem>
</varlistentry>
</variablelist>



session_handle
  Object path for the `org.freedesktop.portal.Session`_ object

state
  Vardict with information about the session state


