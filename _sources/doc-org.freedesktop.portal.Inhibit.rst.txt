.. _org.freedesktop.portal.Inhibit:

==============================
org.freedesktop.portal.Inhibit
==============================

-----------
Description
-----------

.. _org.freedesktop.portal.Inhibit Description:

Portal for inhibiting session transitions

This simple interface lets sandboxed applications inhibit the user
session from ending, suspending, idling or getting switched away.

This documentation describes version 3 of this interface.



----------
Properties
----------

.. org.freedesktop.portal.Inhibit Properties:

org.freedesktop.portal.Inhibit:version
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    version readable u




-------
Methods
-------

.. org.freedesktop.portal.Inhibit Methods:

org.freedesktop.portal.Inhibit.Inhibit
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    Inhibit (
      IN window s,
      IN flags u,
      IN options a{sv},
      OUT handle o
    )



Inhibits a session status changes. To remove the inhibition,
call `org.freedesktop.portal.Request.Close`_ on the returned
handle.

The flags determine what changes are inhibited:
<simplelist>
<member>1: Logout</member>
<member>2: User Switch</member>
<member>4: Suspend</member>
<member>8: Idle</member>
</simplelist>

Supported keys in the ``options`` vardict include:
<variablelist>
<varlistentry>
<term>handle_token s</term>
<listitem><para>
A string that will be used as the last element of the ``handle``. Must be a valid
object path element. See the `org.freedesktop.portal.Request`_ documentation for
more information about the ``handle``.
</para></listitem>
</varlistentry>
<varlistentry>
<term>reason s</term>
<listitem><para>User-visible reason for the inhibition.</para></listitem>
</varlistentry>
</variablelist>



window
  Identifier for the window

flags
  Flags identifying what is inhibited

options
  Vardict with optional further information



org.freedesktop.portal.Inhibit.CreateMonitor
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    CreateMonitor (
      IN window s,
      IN options a{sv},
      OUT handle o
    )



Creates a monitoring session. While this session is
active, the caller will receive StateChanged signals
with updates on the session state.

A successfully created session can at any time be closed using
org.freedesktop.portal.Session::Close, or may at any time be closed
by the portal implementation, which will be signalled via
`org.freedesktop.portal.Session::Closed`_.

Supported keys in the ``options`` vardict include:
<variablelist>
<varlistentry>
<term>handle_token s</term>
<listitem><para>
A string that will be used as the last element of the ``handle``. Must be a valid
object path element. See the `org.freedesktop.portal.Request`_ documentation for
more information about the ``handle``.
</para></listitem>
</varlistentry>
<varlistentry>
<term>session_handle_token s</term>
<listitem><para>
A string that will be used as the last element of the session handle. Must be a valid
object path element. See the `org.freedesktop.portal.Session`_ documentation for
more information about the session handle.
</para></listitem>
</varlistentry>
</variablelist>

The following results get returned via the `org.freedesktop.portal.Request::Response`_ signal:
<variablelist>
<varlistentry>
<term>session_handle o</term>
<listitem><para>
The session handle. An object path for the
`org.freedesktop.portal.Session`_ object representing the created
session.
</para></listitem>
</varlistentry>
</variablelist>

This method was added in version 2 of this interface.



window
  the parent window

options
  Vardict with optional further information



org.freedesktop.portal.Inhibit.QueryEndResponse
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    QueryEndResponse (
      IN session_handle o
    )



Acknowledges that the caller received the `org.freedesktop.portal.Inhibit::StateChanged`_
signal. This method should be called within one second or receiving a StateChanged
signal with the 'Query End' state.

Since version 3.



session_handle
  Object path for the `org.freedesktop.portal.Session`_ object


-------
Signals
-------

.. org.freedesktop.portal.Inhibit Signals:

org.freedesktop.portal.Inhibit::StateChanged
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

    StateChanged (
      session_handle o,
      state a{sv}
    )



The StateChanged signal is sent to active monitoring sessions when
the session state changes.

When the session state changes to 'Query End', clients with active monitoring
sessions are expected to respond by calling
`org.freedesktop.portal.Inhibit.QueryEndResponse`_ within a second
of receiving the StateChanged signal. They may call `org.freedesktop.portal.Inhibit.Inhibit`_
first to inhibit logout, to prevent the session from proceeding to the Ending state.

The following information may get returned in the ``state`` vardict:
<variablelist>
<varlistentry>
<term>screensaver-active b</term>
<listitem><para>
Whether the screensaver is active.
</para></listitem>
</varlistentry>
<varlistentry>
<term>session-state u</term>
<listitem><para>
The state of the session. This member is new in version 3.
</para>
<simplelist>
<member>1: Running</member>
<member>2: Query End</member>
<member>3: Ending</member>
</simplelist>
</listitem>
</varlistentry>
</variablelist>



session_handle
  Object path for the `org.freedesktop.portal.Session`_ object

state
  Vardict with information about the session state


